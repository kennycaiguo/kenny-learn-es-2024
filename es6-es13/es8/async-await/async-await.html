<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>es8新特性1-async-await</title>
</head>
<body>
    <script>
        //async await可以以同步的方式来执行异步代码
        async function fetchProducts() {
            try {
                const response = await fetch(
                "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json",
                );
                if (!response.ok) {
                throw new Error(`HTTP 请求错误：${response.status}`);
                }
                const json = await response.json();
                return json;
            } catch (error) {
                console.error(`无法获取产品列表：${error}`);
            }
        }

            const jsonPromise = fetchProducts();//返回的是一个Promise对象
            // jsonPromise.then((json) => console.log(json[0].name));
            jsonPromise.then((json) => console.log(json));
    </script>
</body>
</html>